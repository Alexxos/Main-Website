<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>AJAX, Async, Await and APIs</title>
    <link rel="stylesheet"
      href="//cdn.jsdelivr.net/gh/highlightjs/cdn-release@10.0.1/build/styles/default.min.css">
      <link rel="stylesheet" href="../../styles/atom-light.css">
      <link rel="stylesheet" href="../../styles/Dom.css">
</head>
<body>
    <h1>AJAX , Async, Await and APIs<h1>

<pre><code class="hljs javascript">       
// AJAX calls with Fetch and Promises
// https://cors-anywhere.herokuapp.com/ to avoir error
function getWeather(woeid) {
fetch(`https://cors-anywhere.herokuapp.com/https://www.metaweather.com/api/location/${woeid}`)
.then(result => {
    console.log(result)
    //convert the json result :
    return result.json() })
.then(data => {
    //console.log(data)
    const today = data.consolidated_weather[0];
    console.log(`temperature in ${data.title} today stays between ${today.min_temp} and ${today.max_temp}`) })
.catch(error => {
    console.log('error') }) }

getWeather(1252431); //temperature in Ho Chi Minh City stays between 27.175 and 34.6


 // Fetch with Async / await
async function getWeatherAW(woeid) {
    try {
        const result = await fetch(`https://cors-anywhere.herokuapp.com/https://www.metaweather.com/api/location/${woeid}`);
        const data = await result.json();
        const tomorrow = data.consolidated_weather[1];
         console.log(`temperature in ${data.title} tomorrow stays between ${tomorrow.min_temp} and ${tomorrow.max_temp}`);
         return data;
    } catch(error) {
        console.log(error) } }

getWeatherAW(2165352);
let dataHK;

getWeatherAW(906057).then(data => {
    dataHK = data;
    console.log(dataHK) });
</code></pre>
    








    <a href="../../index.html" class="gradient"> Home </a>
    <script src="//cdn.jsdelivr.net/gh/highlightjs/cdn-release@10.0.1/build/highlight.min.js"></script>
    <script>hljs.initHighlightingOnLoad();</script> 
</body>
</html>