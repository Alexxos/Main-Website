<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="//cdn.jsdelivr.net/gh/highlightjs/cdn-release@10.0.1/build/styles/default.min.css">
    <link rel="stylesheet" href="../styles/Dom.css">
    <title>React</title>
</head>

<body>
    <h1>React</h1>
    <h3>Basic props destructuring : </h3>
    <pre><code class="language-Javascript">
class Machine extends Components {
    render() {
        const {s1, s2, s3} = this.props;
        return 
< p>{s1}{s2}{s3}< /p>
        }
}
</code></pre>

    <h3>Loops in JSX with .map()</h3>
    <pre><code class="language-Javascript">
    class Message extends Components {
        render() {
            const msgs = [
            {id:1, text: 'Greetings!'},
            {id:2, text: 'Goodbye!'},
            ]
            return (
                < ul>
{msgs.map(m => < li >{m.text}< li /> )}
                < /ul>
            )
            }
    }
</code></pre>
    <pre><code class="language-Javascript">
class Friends extends Components {
    render() {
        const {name, hobbies} = this.props;
        return (
            < ul>
    {hobbies.map(h => < li >{h}< li /> )}
// this loop each hobbies
            < /ul>
            )
        }
    }
</code></pre>

    <h3>Default props</h3>

    <pre><code class="language-Javascript">
class Hello extends Components {
    static defaultProps = {
        from: "Joel",
    };

    render() {
        return < p> Hi {this.props.to} from {this.props.from}"< p/>
    }
}
</code></pre>

    <h3>Css inline Styles</h3>

    <pre><code class="language-Javascript">
class Machine extends Components {
    
    render() {
        const colors = { 
            fontSize: '50px',
            backgroundColor: 'purle',
            border: '2px solid, blue'
                    };
                    
        return (
            < div style={colors}> LoremIpsum < div/>
        )
    }
}
</code></pre>


    <h3>Switch css .class</h3>

    <pre><code class="language-Javascript">
class Machine extends Components {
    
        render(){            
        return (
// create .winner and .loser class in css
< div className={winner ? 'win' : 'lose'}>
 {winner ? 'Winner!' : 'Loser!'} < div/>
        )
    }
}
</code></pre>

    <h4>Import / export Components</h4>
    <p>export file</p>
    <pre><code>
    //export file:
    export default Helpful;
    export { func2, func3 };
    
    //import file:
    import Helpful, {fun2, func3} from './Helpful'
</code></pre>

    <h4>Statefull classes (setState outside constructor and render)</h4>
    <pre><code class="language-Javascript">
import React, { Component } from 'react'

class Rando extends Component {
    constructor(props) {
        super(props);
        this.state = { num: 0 };
        this.handleClick = this.handleClick.bind(this)
    }

    handleClick(e) {
        let rand = Math.floor(Math.random() *10);
        this.setState({ num: rand });
        }

    render() {
        return (
            < div>
                < h1>Your Score is: {this.state.num}</>
                < button 
                className="btn"
                onClick={this.handleClick}
                > click me < button/> 
            </>
        )
    }
}
export default Rando
</code></pre>

    <h4>Alternate syntax (babel) + arrow function to avoid 'this' binding issue</h4>
    <pre><code class="language-Javascript">
import React, { Component } from 'react'

class Rando extends Component {
        state = { num: 0 };
        //this.handleClick = this.handleClick.bind(this)

        handleClick = (e) =>  {
            let rand = Math.floor(Math.random() *10);
            this.setState({ num: rand });
            }
        
        render() {
            return (
                < div>
                < div>
                    < h1>Your Score is: {this.state.num}</>

                    < div>
                    < h1>Your Score is: {this.state.num}</>
                < div>
                    < h1>Your Score is: {this.state.num}</>
                    < h1>Your Score is: {this.state.num}</>
                    < button 
                    className="btn"
                    onClick={this.handleClick}
                    > click me < button/> 
                </>
            )
        }
    }
export default Rando
</code></pre>

    <h4>Statefull function using Hooks</h4>
    <pre><code class="language-Javascript">
    import React, { useState } from 'react';
    import './Counter.css'
    
    function Counter({ step = 1 }) {
        //const [value, setValue] = initial state(value)
        const [count, setCount] = useState(0);
    
        return (
            < div className="Counter">
                < h2>{count}</>
                < button 
                onClick={() => setCount(count + step)}
        );
    }
    export default Counter;

    import React, { useState } from 'react';

function Mood() {
    const [isHappy, setisHappy] = useState(true);
    const toggleisHappy = () => setisHappy(!isHappy);
    const styles = { backgroundColor: isHappy ? 'green' : 'red' };

    return (
        < h3 
        onClick={toggleisHappy} 
        style={styles}
        className="Mood"
        >
            {isHappy ? ':)' : ':('}
    );
}
export default Mood;
</code></pre>

    <h4>State as props</h4>
    <pre><code class="language-Javascript">
Class CounterParent extends Component {
    constructor(props){
    super(props)
    this.state = {count: 5}
    }
    render() {
        return (
    < div> 
    < CounterChild count={this.state.count} />
    < div>
        )
    }
}
</code></pre>
<h4>State & default props</h4>
<pre><code class="language-Javascript">
import React, { Component } from 'react'
import Die from './Die'
import './RollDice.css'
        
class RollDice extends Component {  
static defaultProps = { 
    sides: ["one", 'two', 'three', 'four', 'five', 'six'] }

constructor(props) {
    super(props);
    this.state = ({
        die1: 'one', 
        die2: 'six', 
        rolling: false
    })
    this.roll = this.roll.bind(this);
    }

roll() {
const newDie1 = this.props.sides
[Math.floor(Math.random() * this.props.sides.length)];
        
const newDie2 = this.props.sides
[Math.floor(Math.random() * this.props.sides.length)];
            
this.setState({ die1: newDie1, die2: newDie2, rolling: true })
    setTimeout(() => {
            this.setState({ rolling: false });
                }, 1000);
}

render() {
    return (
        <div className="RollDice">
            <Die face={this.state.die1} rolling={this.state.rolling}/>
            <Die face={this.state.die2} rolling={this.state.rolling}/>
            <br />
            <button onClick={this.roll} disabled={this.state.rolling}>
                        {this.state.rolling ? 'Rolling...' : 'click me'}
            </button>
            <h1>{this.state.face} </h1>
        </div>
        )
    }
}
export default RollDice
</code></pre>

<h4>setState Callback Form: this.setState(callback)</h4>
<pre><code class="language-Javascript">
tripleKill(){
    this.setState(st => {return {score: st.score +1}})
    this.setState(st => {return {score: st.score +1}})
    this.setState(st => {return {score: st.score +1}})
}
</code></pre>

<h4>Abstracting State updates with functional setState</h4>
<pre><code class="language-Javascript">
//elsewhere in the code:
function incrementCounter(prevState){
    return { count: prevState.count + 1}
}
//somewhere in the Component
this.setState(incrementCounter)

incrementScore(curState) {
    return { score: curState.score + 1}
}

tripleKill() {
    this.setState(incrementScore)
    this.setState(incrementScore)
    this.setState(incrementScore)
}
</code></pre>
<h4>Immutable state: the idea to create a new copy of the data structure (here with the spread operator)</h4>
<pre><code class="language-Javascript">
completeTodo(id) {
//Array.prototype.map returns a new Array

const newTodos = this.state.todos.map(todo => {
    if (todo.id === id) {
    //make a copy of the todo object wth done -> true
    return {...todo, done: true}
    }
    return todo; //old todos can pass through
})
    this.setState({
        todos: newTodos })} //setState to the new array 
    </code></pre>

<h4>Another exemple of mutating state with copy (...spread operator)</h4>
<pre><code class="language-Javascript">
let idx = Math.floor(Math.random() *this.props.options.lenght);
let newIcon = this.props.options[idx];
this.setState({ icons: [...this.state.icons, newIcon]})
    </code></pre>
<h4>Designing State : Minimizing you state / State in parent ( downward data flow) </h4>
    <pre><code class="language-Javascript">
    </code></pre>
    <pre><code class="language-Javascript">
    </code></pre>
    <pre><code class="language-Javascript">
    </code></pre>
    <pre><code class="language-Javascript">
    </code></pre>
    <pre><code class="language-Javascript">
    </code></pre>




    <a href="../index.html" class="gradient"> Home </a>
    <script src="//cdn.jsdelivr.net/gh/highlightjs/cdn-release@10.0.1/build/highlight.min.js"></script>
    <script>hljs.initHighlightingOnLoad();</script>
</body>

</html>